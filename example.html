<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script src="deferred.js"></script>
    </head>
    <body>
        <script>
            var dfd = new Deferred(function (result1, result2) {
                console.log(result1, result2);
            }, window);

            // Добавление отложенного метода
            // ctx - контекст передающий в колбек в виде this
            dfd.done(function (complete) {
                setTimeout(function () {
                    complete('foo');
                }, 2000);
            }, window);

            dfd.done(function (complete) {
                setTimeout(function () {
                    complete('bar');
                }, 1000);
            }, window);

            // Выполняет все отложенные методы
            dfd.resolve();
        </script>
    </body>
</html>